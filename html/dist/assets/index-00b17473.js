import{p as e,c as l,r as a,a1 as s,z as t,A as o,F as u,H as d,$ as r,Y as n,E as i,I as c,C as h,u as p,J as v}from"./chunk-BGPNDDXN-18fd0b11.js";import{b as m}from"./app-cd5c52f9.js";import{u as f,a as _,V as y,_ as V}from"./useNotyf-2f52a383.js";import{_ as b}from"./VButton.vue_vue_type_style_index_0_lang-04276c31.js";import{_ as g,b as x}from"./route-block-26ba3c5b.js";import"./@vueuse_head-b43a635b.js";const P={class:"account-box is-form is-footerless"},U={class:"form-head-inner"},j=u("div",{class:"left"},[u("h3",null,"Modbus Config"),u("p",null,"Edit modbus parameters")],-1),k={class:"right"},C={class:"buttons"},S={key:0,class:"form-body"},z={class:"fieldset"},B=u("div",{class:"fieldset-heading"},[u("h4",null,"RTU Parameters")],-1),E={class:"columns is-multiline"},T={class:"column is-12"},w={class:"column is-12"},D={class:"column is-12"},H={class:"column is-12"},K={class:"column is-12"},N={class:"fieldset"},O=u("div",{class:"fieldset-heading"},[u("h4",null,"TCP Parameters")],-1),A={class:"columns is-multiline"},F={class:"column is-12"},G={class:"column is-12"},I={class:"column is-12"},J=g.decode,M=g.encode,R=e({__name:"index",setup(e){const{y:g}=m(),x=l((()=>g.value>30)),R=f();let X={host:"",port:"",dhcpserver:""};const Y=a(!1),$=a([]),q=a({}),L=a(!1),Q=async()=>{L.value=!0;const e=M(q.value);fetch("/data/save.php",{method:"POST",body:e}).then((e=>("OK"===e.statusText?R.success("Saved"):R.success("Error"),e.text()))).catch((e=>R.success("Error"))),L.value=!1,W()};s((async()=>{W()}));const W=async()=>{await fetch("/data/setup.ini").then((e=>e.text())).then((e=>{$.value.push(...e.split("\n")),q.value=J($.value.join("\n")),Y.value=!0})).catch((e=>console.log(e)))};return(e,l)=>(t(),o("div",P,[u("div",{class:h(["form-head stuck-header",[p(x)&&"is-stuck"]])},[u("div",U,[j,u("div",k,[u("div",C,[d(b,{color:"primary",raised:"",tabindex:"0",onKeydown:r(n(Q,["prevent"]),["space"]),onClick:Q},{default:i((()=>[c(" Save Changes ")])),_:1},8,["onKeydown"])])])])],2),!0===Y.value?(t(),o("div",S,[u("div",z,[B,u("div",E,[u("div",T,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:q.value.rs485.port,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value.rs485.port=e),type:"text",placeholder:"Port"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",w,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:q.value.rs485.baudrate,"onUpdate:modelValue":l[1]||(l[1]=e=>q.value.rs485.baudrate=e),type:"text",placeholder:"Baudrate"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",D,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:q.value.rs485.stopbits,"onUpdate:modelValue":l[2]||(l[2]=e=>q.value.rs485.stopbits=e),type:"text",placeholder:"Stopbits"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",H,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:q.value.rs485.bytesize,"onUpdate:modelValue":l[3]||(l[3]=e=>q.value.rs485.bytesize=e),type:"text",placeholder:"Bytesize"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",K,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:q.value.rs485.parity,"onUpdate:modelValue":l[4]||(l[4]=e=>q.value.rs485.parity=e),type:"text",placeholder:"Parity"},null,8,["modelValue"])])),_:1})])),_:1})])])]),u("div",N,[O,u("div",A,[u("div",F,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:p(X).host,"onUpdate:modelValue":l[5]||(l[5]=e=>p(X).host=e),disabled:"",type:"text",placeholder:"Host"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",G,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:p(X).port,"onUpdate:modelValue":l[6]||(l[6]=e=>p(X).port=e),disabled:"",type:"text",placeholder:"Port"},null,8,["modelValue"])])),_:1})])),_:1})]),u("div",I,[d(_,null,{default:i((()=>[d(y,{icon:"feather:chevron-right"},{default:i((()=>[d(V,{modelValue:p(X).dhcpserver,"onUpdate:modelValue":l[7]||(l[7]=e=>p(X).dhcpserver=e),type:"text",disabled:"",placeholder:"DHCP Server"},null,8,["modelValue"])])),_:1})])),_:1})])])])])):v("",!0)]))}});"function"==typeof x&&x(R);export{R as default};
